<!-- BEGIN_TF_DOCS -->
# database

This module manages the azurerm database resources.
For more information see https://registry.terraform.io/providers/azurerm/latest/docs > database

_<-- This file is autogenerated, please do not change. -->_

## Requirements

| Name | Version |
|------|---------|
| terraform | >=1.3 |
| azurerm | >=4.40.0, <5.0 |

## Providers

| Name | Version |
|------|---------|
| azurerm | >=4.40.0, <5.0 |

## Resources

| Name | Type |
|------|------|
| azurerm_mssql_database.mssql_database | resource |
| azurerm_mssql_firewall_rule.mssql_firewall_rule | resource |
| azurerm_mssql_server.mssql_server | resource |
| azurerm_mssql_virtual_network_rule.mssql_virtual_network_rule | resource |
| azurerm_mysql_flexible_database.mysql_flexible_database | resource |
| azurerm_mysql_flexible_server.mysql_flexible_server | resource |
| azurerm_mysql_flexible_server_configuration.mysql_flexible_server_configuration | resource |
| azurerm_mysql_flexible_server_firewall_rule.mysql_flexible_server_firewall_rule | resource |
| azurerm_postgresql_flexible_server.postgresql_flexible_server | resource |
| azurerm_postgresql_flexible_server_configuration.postgresql_flexible_server_configuration | resource |
| azurerm_postgresql_flexible_server_database.postgresql_flexible_server_database | resource |
| azurerm_postgresql_flexible_server_firewall_rule.postgresql_flexible_server_firewall_rule | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| mssql_database | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mssql_firewall_rule | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mssql_server | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mssql_virtual_network_rule | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mysql_flexible_database | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mysql_flexible_server | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mysql_flexible_server_configuration | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| mysql_flexible_server_firewall_rule | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| postgresql_flexible_server | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| postgresql_flexible_server_configuration | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| postgresql_flexible_server_database | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |
| postgresql_flexible_server_firewall_rule | Resource definition, default settings are defined within locals and merged with var settings. For more information look at [Outputs](#Outputs). | `any` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| mssql_database | Outputs all attributes of resource_type. |
| mssql_firewall_rule | Outputs all attributes of resource_type. |
| mssql_server | Outputs all attributes of resource_type. |
| mssql_virtual_network_rule | Outputs all attributes of resource_type. |
| mysql_flexible_database | Outputs all attributes of resource_type. |
| mysql_flexible_server | Outputs all attributes of resource_type. |
| mysql_flexible_server_configuration | Outputs all attributes of resource_type. |
| mysql_flexible_server_firewall_rule | Outputs all attributes of resource_type. |
| postgresql_flexible_server | Outputs all attributes of resource_type. |
| postgresql_flexible_server_configuration | Outputs all attributes of resource_type. |
| postgresql_flexible_server_database | Outputs all attributes of resource_type. |
| postgresql_flexible_server_firewall_rule | Outputs all attributes of resource_type. |
| variables | Displays all configurable variables passed by the module. __default__ = predefined values per module. __merged__ = result of merging the default values and custom values passed to the module |

## Examples

Minimal configuration to install the desired resources with the module

```hcl
resource "random_password" "password" {
  for_each = toset(["mysql_root", "postgresql_root", "mssql_admin"])

  length  = 16
  special = false
}

module "database" {
  source = "registry.terraform.io/telekom-mms/database/azurerm"
  mysql_flexible_server = {
    mysql-mms = {
      location               = "westeurope"
      resource_group_name    = "rg-mms-github"
      administrator_login    = "mysql_root"
      administrator_password = random_password.password["mysql_root"].result
      sku_name               = "GP_Standard_D2ds_v4"
    }
  }
  mysql_flexible_server_configuration = {
    interactive_timeout = {
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
      value               = "600"
    }
  }
  mysql_flexible_database = {
    application = {
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
    }
  }
  mysql_flexible_server_firewall_rule = {
    AzureServices = {
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      start_ip_address    = cidrhost("0.0.0.0/32", 0)
      end_ip_address      = cidrhost("0.0.0.0/32", -1)
    }
  }
  postgresql_flexible_server = {
    postgresql-mms = {
      location               = "westeurope"
      resource_group_name    = "rg-mms-github"
      administrator_login    = "postgresql_root"
      administrator_password = random_password.password["postgresql_root"].result
      sku_name               = "GP_Standard_D2ds_v5"
    }
  }
  postgresql_flexible_server_configuration = {
    backslash_quote = {
      server_id = module.database.postgresql_flexible_server["postgresql-mms"].id
      value     = "on"
    }
  }
  postgresql_flexible_server_database = {
    application = {
      server_id = module.database.postgresql_flexible_server["postgresql-mms"].id
    }
  }
  postgresql_flexible_server_firewall_rule = {
    AzureServices = {
      server_id        = module.database.postgresql_flexible_server["postgresql-mms"].id
      start_ip_address = cidrhost("0.0.0.0/32", 0)
      end_ip_address   = cidrhost("0.0.0.0/32", -1)
    }
  }
  mssql_server = {
    sql-mms = {
      resource_group_name          = "rg-mms-github"
      location                     = "westeurope"
      administrator_login          = "mssql_admin"
      administrator_login_password = random_password.password["mssql_admin"].result
      version                      = "12.0"
    }
  }
  mssql_database = {
    sqldb-mms = {
      server_id = module.database.mssql_server["sql-mms"].id
    }
  }
  mssql_firewall_rule = {
    AzureServices = {
      server_id        = module.database.mssql_server["sql-mms"].id
      start_ip_address = cidrhost("0.0.0.0/32", 0)
      end_ip_address   = cidrhost("0.0.0.0/32", -1)
    }
  }
}

```

Advanced configuration to install the desired resources with the module

```hcl
resource "random_password" "password" {
  for_each = toset(["mysql_root", "postgresql_root", "mssql_admin"])

  length  = 16
  special = false
}

module "database" {
  source = "registry.terraform.io/telekom-mms/database/azurerm"
  mysql_flexible_server = {
    mysql-mms = {
      location               = "westeurope"
      resource_group_name    = "rg-mms-github"
      administrator_login    = "mysql_root"
      administrator_password = random_password.password["mysql_root"].result
      sku_name               = "GP_Standard_D2ds_v4"
      version                = "8.0.21"
      zone                   = "1"
      storage = {
        io_scaling_enabled = true
        size_gb            = 20
      }
      high_availability = {
        mode                      = "ZoneRedundant"
        standby_availability_zone = 2
      }
      tags = {
        project     = "mms-github"
        environment = terraform.workspace
        managed-by  = "terraform"
      }
    }
  }
  mysql_flexible_server_configuration = {
    interactive_timeout = {
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
      value               = "600"
    }
  }
  mysql_flexible_database = {
    application = {
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
    }
  }
  mysql_flexible_server_firewall_rule = {
    AzureServices = {
      server_name         = module.database.mysql_flexible_server["mysql-mms"].name
      resource_group_name = module.database.mysql_flexible_server["mysql-mms"].resource_group_name
      start_ip_address    = cidrhost("0.0.0.0/32", 0)
      end_ip_address      = cidrhost("0.0.0.0/32", -1)
    }
  }

  postgresql_flexible_server = {
    postgresql-mms = {
      location               = "westeurope"
      resource_group_name    = "rg-mms-github"
      administrator_login    = "postgresql_root"
      administrator_password = random_password.password["postgresql_root"].result
      sku_name               = "GP_Standard_D2ds_v5"
      storage_mb             = 32768
      version                = "16"
      zone                   = "1"
      high_availability = {
        mode                      = "ZoneRedundant"
        standby_availability_zone = 2
      }
      tags = {
        project     = "mms-github"
        environment = terraform.workspace
        managed-by  = "terraform"
      }
    }
  }
  postgresql_flexible_server_configuration = {
    backslash_quote = {
      server_id = module.database.postgresql_flexible_server["postgresql-mms"].id
      value     = "on"
    }
  }
  postgresql_flexible_server_database = {
    application = {
      server_id = module.database.postgresql_flexible_server["postgresql-mms"].id
    }
  }
  postgresql_flexible_server_firewall_rule = {
    AzureServices = {
      server_id        = module.database.postgresql_flexible_server["postgresql-mms"].id
      start_ip_address = cidrhost("0.0.0.0/32", 0)
      end_ip_address   = cidrhost("0.0.0.0/32", -1)
    }
  }

  mssql_server = {
    sql-mms = {
      name                                 = "sql-mms"
      resource_group_name                  = "rg-mms-github"
      location                             = "westeurope"
      version                              = "12.0"
      administrator_login                  = "mssql_admin"
      administrator_login_password         = random_password.password["mssql_admin"].result
      connection_policy                    = "Redirect"
      minimum_tls_version                  = "1.2"
      public_network_access_enabled        = false
      outbound_network_restriction_enabled = false
      identity = {
        type = "SystemAssigned"
      }
      tags = {
        project     = "mms-github"
        environment = terraform.workspace
        managed-by  = "terraform"
      }
    }
  }

  mssql_database = {
    sqldb-mms = {
      name                                = "sqldb-mms"
      server_id                           = module.database.mssql_server["sql-mms"].id
      auto_pause_delay_in_minutes         = 60
      create_mode                         = "Default"
      collation                           = "SQL_Latin1_General_CP1_CI_AS"
      geo_backup_enabled                  = true
      ledger_enabled                      = false
      license_type                        = "LicenseIncluded"
      max_size_gb                         = 4
      min_capacity                        = 0.5
      read_scale                          = false
      sku_name                            = "S0"
      storage_account_type                = "Local"
      transparent_data_encryption_enabled = true
      zone_redundant                      = false
      short_term_retention_policy = {
        retention_days           = 7
        backup_interval_in_hours = 24
      }
      long_term_retention_policy = {
        weekly_retention  = "P1W"
        monthly_retention = "P1M"
        yearly_retention  = "P1Y"
        week_of_year      = 1
      }
      threat_detection_policy = {
        state                      = "Enabled"
        disabled_alerts            = []
        email_account_admins       = "Enabled"
        email_addresses            = ["test@example.com"]
        retention_days             = 7
        storage_account_access_key = "key"
        storage_endpoint           = "https://example.blob.core.windows.net/"
      }
      tags = {
        project     = "mms-github"
        environment = terraform.workspace
        managed-by  = "terraform"
      }
    }
  }

  mssql_virtual_network_rule = {
    sqlvnet-mms = {
      name                                 = "sqlvnet-mms"
      server_id                            = module.database.mssql_server["sql-mms"].id
      subnet_id                            = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-mms-github/providers/Microsoft.Network/virtualNetworks/vnet-mms/subnets/subnet-mms"
      ignore_missing_vnet_service_endpoint = true
    }
  }

  mssql_firewall_rule = {
    AzureServices = {
      server_id        = module.database.mssql_server["sql-mms"].id
      start_ip_address = cidrhost("0.0.0.0/32", 0)
      end_ip_address   = cidrhost("0.0.0.0/32", -1)
    }
  }
}
```
<!-- END_TF_DOCS -->